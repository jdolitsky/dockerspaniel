DockerSpaniel
=============

Create Dockerfiles from JSON

![docker](http://upload.wikimedia.org/wikipedia/commons/7/79/Docker_%28container_engine%29_logo.png)

![cocker spaniel](http://upload.wikimedia.org/wikipedia/en/thumb/0/07/Home_cocker_spaniel.jpg/160px-Home_cocker_spaniel.jpg)

### Install

```
git clone git@github.com:jdolitsky/dockerspaniel.git
cd dockerspaniel
npm install -g
```

### Create a Spanielfile

```javascript
{
    "from": "ubuntu:12.04",
    "maintainer": "Josh Dolitsky <jdolitsky@gmail.com>",
    "steps": [
        {
            "instruction": "run",
            "arguments": "apt-get update",
            "comment": "update packages"
        },
        {
            "instruction": "run",
            "arguments": "apt-get install -y git python-software-properties python g++ make",
            "comment": "install dependencies"
        },
        {
            "instruction": "run",
            "arguments": "add-apt-repository ppa:chris-lea/node.js"
        },
        {
            "instruction": "run",
            "arguments": "apt-get update"
        },
        {
            "instruction": "run",
            "arguments": "apt-get install -y nodejs"
        },
        {
            "instruction": "run",
            "arguments": "addgroup josh --system && adduser josh --system --ingroup=josh",
            "newline": true 
        },
        {
            "instruction": "run",
            "arguments": "mkdir -p /var/app/www && chown -R josh:josh /var/app/www"
        },
        {
            "instruction": "user",
            "arguments": "josh"
        },
        {
            "instruction": "env",
            "arguments": "HOME /home/josh"
        },
        {
            "instruction": "workdir",
            "arguments": "/var/app/www"
        },
        {
            "instruction": "run",
            "arguments": "git clone https://github.com/heroku/node-js-sample.git ."
        },
        {
            "instruction": "run",
            "arguments": "npm install"
        },
        {
            "instruction": "expose",
            "arguments": "5000"
        },
        {
            "instruction": "cmd",
            "arguments": "npm start"
        }
    ]
}
```

### Convert the Spanielfile to a Dockerfile

```
cd /dir/with/spanielfile && dockerspaniel
```

creates a Dockerfile in the same directory

```
#
#   generated by DockerSpaniel
#
FROM ubuntu:12.04
MAINTAINER Josh Dolitsky <jdolitsky@gmail.com>

# update packages
RUN apt-get update

# install dependencies
RUN apt-get install -y git python-software-properties python g++ make
RUN add-apt-repository ppa:chris-lea/node.js
RUN apt-get update
RUN apt-get install -y nodejs

RUN addgroup josh --system && adduser josh --system --ingroup=josh
RUN mkdir -p /var/app/www && chown -R josh:josh /var/app/www
USER josh
ENV HOME /home/josh
WORKDIR /var/app/www
RUN git clone https://github.com/heroku/node-js-sample.git .
RUN npm install
EXPOSE 5000
CMD npm start
```
